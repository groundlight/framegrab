version: '3.8'

services:
  framegrab:
    build:
      context: ..
      dockerfile: docker/Dockerfile.rtsp
    container_name: framegrab-rtsp
    volumes:
      # Mount source code for live development
      - ../src/framegrab:/app/src/framegrab:ro
      - ../test:/app/test:ro
      - ../sample_scripts:/app/sample_scripts:ro
      # Output directory for test artifacts (writable)
      - ../output:/app/output
    environment:
      - PYTHONUNBUFFERED=1
    # Network mode host for easier RTSP access
    network_mode: host
    stdin_open: true
    tty: true
    command: /bin/bash

